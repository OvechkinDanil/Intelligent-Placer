# Intelligent-Placer

## Постановка задачи

### Описание задачи

По поданной на вход фотографии нескольких предметов и многоугольнику, нарисованному на бумаге, лежащих на ярко-зеленой поверхности, понимать, можно ли расположить одновременно все эти предметы на плоскости так, чтобы они влезли в этот многоугольник. Предметы и горизонтальная поверхность, которые могут оказаться на фотографии, заранее известны.

### Входные и выходные значения

##### На вход:

Изображение в формате jpeg предметов и многоугольника, который нарисован темным маркером на белом листе бумаги. На фотографии лист бумаги и предметы лежат на поверхности не белого цвета. Лист бумаги с многоугольником всегда находится ниже предметов.

##### На выход:

Выдаёт **True** - если данный набор предметов может поместиться на данный многоугольник и **False** - в ином случае. Ответ, в зависимости от конфигурации, может быть получен, как в консоль, так и в файл.



### Требования

##### К фотографиями:
- Сняты на одном устройстве
- На широкоугольную камеру 12 мп
- При одинаковом освещении
- Цветные, без наложения каких-то фильтров
- Фокус должен быть на предмете
- Без размытостей фона
- Отсутсвуют пересвеченные и серо-черные области
- Устройство находится под прямым углом к нормали поверхности
- Высота съемки - до 50 см

##### К предметам:
- Полностью помещаются на лист бумаги
- Полностью расположен на фото
- Не размываются с фоном(толщина линии границы не более 10 px)
- Не накладываются на другие предметы
- Нет одинаковых предметов

##### К поверхности:
- Светлая
- Горизонтальная
- Прямая
- Однотонная, без рисунков
- Отличается от цвета листа, на котором лежат предметы(не белый)

### Данные

Все собранные данные можно посмотреть в директории **data**
- В директории **yes** лежат те предметы, на которых конечный алгоритм должен выдать ответ **yes**
- В директории **no** соответственно ответ **no**

## План
1. Поиск границ листа и фигуры <br/>
    1.1. Бинаризация изображения с помщью морфологических операций
2. Поиск границ предметов <br/>
	2.1. С помщью детектора Кэнни и морфологических операций определены 
3. Упрощение контуров выделенных предметов прямоугольникаим <br/>
	3.1. Поиск минимального прямоугольника, который определяет область предмета, с помощью библиотеки OpenCV<br/>
	3.2. Удаление ненужных прямоугольников по критериям, основанным на постановке задачи.
4. Ответ на вопрос из постановки задачи <br/>
	4.1. Суммирование площадей прямоугольников и сравнение с площадью многоугольника
	
## TODO
1. Улучшить определения контуров предметов <br/>
   1.1. Есть несколько изображение в датасете, на которых алгоритм не может определить контуры предметов(test15_bad.jpg, test16_bad.jpg и test23_bad.jpg)
2. Изменить алогритм поиска ответа на поставленную задачу <br/>
  2.1. Один из вариантов - параллельный перенос прямоугольников на заданный многоугольник и методом перебора поиск лучшей комбинацию для расположения предметов(если она существует)

### Текущая статистика алгоритма

На текущем датасете из 17 изображений следующая точность:
- Для 13 изображений ответ правильный
- Для 3 изображений ответ не получен из-за ошибки определния контуров
- Для 1 изображения ответ неправильный